[gd_scene load_steps=29 format=3 uid="uid://bt3yiolmr1400"]

[ext_resource type="Script" uid="uid://ik3swfhe15xk" path="res://scripts/mundo.gd" id="1_vwj67"]
[ext_resource type="Texture2D" uid="uid://dxwfcfr0wcxvf" path="res://assets/sprites/secuencia estrellas/estrellas_00000.png" id="2_75jji"]
[ext_resource type="Texture2D" uid="uid://tx70aws0hmqm" path="res://assets/sprites/mundo.png" id="2_jaeu2"]
[ext_resource type="Script" uid="uid://b2ix5gg2pesyi" path="res://scripts/menu.gd" id="2_kxyy5"]
[ext_resource type="AudioStream" uid="uid://b7on56m2pq6d8" path="res://assets/music/Palita_boceto_01.ogg" id="2_wd5o3"]
[ext_resource type="PackedScene" uid="uid://cyutw7vax147r" path="res://scenes/jugador.tscn" id="3_75jji"]
[ext_resource type="AudioStream" uid="uid://b78h5leny3hrj" path="res://assets/sfx/mundo_ambient.ogg" id="3_cae5a"]
[ext_resource type="FontFile" uid="uid://c1usnef3huorv" path="res://assets/fonts/CutePixel.ttf" id="3_kxyy5"]
[ext_resource type="PackedScene" uid="uid://bddxsejrwhq3o" path="res://scenes/corazon_mundo.tscn" id="4_kxyy5"]
[ext_resource type="AudioStream" uid="uid://h0ff86ehxdbd" path="res://assets/sfx/mundo_wisdoms_tragedy.ogg" id="4_l7i8s"]
[ext_resource type="PackedScene" uid="uid://bm23vdnravohh" path="res://scenes/recicladora.tscn" id="8_06eai"]
[ext_resource type="PackedScene" uid="uid://ds63ymif64mly" path="res://scenes/save_system.tscn" id="8_6o2rw"]
[ext_resource type="PackedScene" uid="uid://dlo4bsn4iesif" path="res://scenes/orbit_system.tscn" id="10_06eai"]
[ext_resource type="Script" uid="uid://b5y845y0xhsew" path="res://scripts/world_boundary_wall.gd" id="11_w7nu4"]
[ext_resource type="PackedScene" uid="uid://08ykletb16dr" path="res://scenes/mugre_pool.tscn" id="12_f7ym0"]
[ext_resource type="PackedScene" uid="uid://ci104613jlym6" path="res://scenes/galpon.tscn" id="12_m7g0u"]
[ext_resource type="Texture2D" uid="uid://bh4txdisgnxoj" path="res://assets/sprites/palita 2.0.png" id="13_35q48"]

[sub_resource type="Theme" id="Theme_wd5o3"]
default_font = ExtResource("3_kxyy5")

[sub_resource type="AtlasTexture" id="AtlasTexture_35q48"]
atlas = ExtResource("13_35q48")
region = Rect2(96, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_mpm4s"]
atlas = ExtResource("13_35q48")
region = Rect2(128, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_h8oge"]
atlas = ExtResource("13_35q48")
region = Rect2(160, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_ltlp1"]
atlas = ExtResource("13_35q48")
region = Rect2(192, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_h06pc"]
atlas = ExtResource("13_35q48")
region = Rect2(224, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_84mw3"]
atlas = ExtResource("13_35q48")
region = Rect2(256, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_dn6y4"]
atlas = ExtResource("13_35q48")
region = Rect2(288, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_gxeb4"]
atlas = ExtResource("13_35q48")
region = Rect2(320, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_vy0ey"]
atlas = ExtResource("13_35q48")
region = Rect2(352, 0, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_cae5a"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_35q48")
}],
"loop": true,
"name": &"invisible",
"speed": 12.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_mpm4s")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_h8oge")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ltlp1")
}],
"loop": false,
"name": &"target_define",
"speed": 12.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_h06pc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_84mw3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dn6y4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gxeb4")
}, {
"duration": 3.0,
"texture": SubResource("AtlasTexture_vy0ey")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gxeb4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dn6y4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_84mw3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_h06pc")
}],
"loop": true,
"name": &"target_hold",
"speed": 12.0
}]

[node name="mundo" type="Node2D"]
y_sort_enabled = true
script = ExtResource("1_vwj67")
cant_max_mugres_s = 9200
cant_max_mugres_m = 1100

[node name="AudioListener2D" type="AudioListener2D" parent="."]
current = true

[node name="palita_boceto_1" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("2_wd5o3")

[node name="ambient" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("3_cae5a")
autoplay = true
bus = &"Ambient"

[node name="wisdoms_tragedy" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("4_l7i8s")
autoplay = true
bus = &"Ambient"

[node name="menu (WIP)" type="CanvasLayer" parent="."]
process_mode = 3
visible = false
script = ExtResource("2_kxyy5")

[node name="Panel" type="Panel" parent="menu (WIP)"]
visible = false
modulate = Color(0, 0, 0, 0.498039)
offset_right = 40.0
offset_bottom = 40.0

[node name="opciones" type="Control" parent="menu (WIP)"]
visible = false
layout_mode = 3
anchors_preset = 0
offset_top = 84.0
offset_right = 40.0
offset_bottom = 84.0

[node name="Label" type="Label" parent="menu (WIP)/opciones"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 23.0

[node name="HSlider" type="HSlider" parent="menu (WIP)/opciones"]
layout_mode = 0
offset_right = 8.0
offset_bottom = 16.0

[node name="controles" type="Control" parent="menu (WIP)"]
layout_mode = 3
anchors_preset = 0
offset_top = 84.0
offset_right = 40.0
offset_bottom = 84.0

[node name="Label" type="Label" parent="menu (WIP)/controles"]
layout_mode = 0
offset_left = 40.0
offset_top = 40.0
offset_right = 451.0
offset_bottom = 167.0
text = "click izquierdo: caminar
click derecho: modo pala 
| mantener presionado 2 segundos: mover la c√°mara
ruedita arriba/abajo: zoom in/out
F: press F to flip (modo pala)
A: MODO CINE"

[node name="VBoxContainer" type="VBoxContainer" parent="menu (WIP)"]
visible = false
offset_right = 40.0
offset_bottom = 40.0
theme = SubResource("Theme_wd5o3")

[node name="Continue" type="Button" parent="menu (WIP)/VBoxContainer"]
layout_mode = 2

[node name="Start" type="Button" parent="menu (WIP)/VBoxContainer"]
layout_mode = 2

[node name="Save" type="Button" parent="menu (WIP)/VBoxContainer"]
layout_mode = 2

[node name="Load" type="Button" parent="menu (WIP)/VBoxContainer"]
layout_mode = 2

[node name="Restart" type="Button" parent="menu (WIP)/VBoxContainer"]
layout_mode = 2

[node name="Controls" type="Button" parent="menu (WIP)/VBoxContainer"]
layout_mode = 2

[node name="Options" type="Button" parent="menu (WIP)/VBoxContainer"]
layout_mode = 2

[node name="fondo estrellas 3" type="Sprite2D" parent="."]
modulate = Color(0.637843, 0.637843, 0.637843, 1)
z_index = -10
scale = Vector2(3.15093, 3.15093)
texture = ExtResource("2_75jji")

[node name="fondo estrellas 2" type="Sprite2D" parent="."]
modulate = Color(0.633757, 0.633757, 0.633757, 1)
z_index = -10
scale = Vector2(1.69537, 1.69537)
texture = ExtResource("2_75jji")

[node name="fondo estrellas 1" type="Sprite2D" parent="."]
modulate = Color(0.581033, 0.581033, 0.581033, 1)
z_index = -10
scale = Vector2(0.763889, 0.763889)
texture = ExtResource("2_75jji")

[node name="sprite_mundo" type="Sprite2D" parent="."]
visible = false
position = Vector2(-8, 1)
texture = ExtResource("2_jaeu2")

[node name="corazon_mundo" parent="." instance=ExtResource("4_kxyy5")]

[node name="recicladora" parent="." instance=ExtResource("8_06eai")]
position = Vector2(217, -98)

[node name="world_boundary_wall" type="StaticBody2D" parent="."]
collision_layer = 128
collision_mask = 0
script = ExtResource("11_w7nu4")

[node name="collpol_outer_left" type="CollisionPolygon2D" parent="world_boundary_wall"]
polygon = PackedVector2Array(-450, -4, -421, -93, -388, -133, -340, -165, -318, -167, -292, -184, -237, -199, -215, -212, -154, -225, -68, -224, -44, -228, 0, -227, 0, -284, -65, -281, -225, -260, -270, -245, -345, -223, -424, -184, -493, -124, -512, -74, -530, 7, -487, 111, -435, 179, -313, 220, -186, 266, 0, 262, 0, 228, -181, 213, -252, 189, -313, 161, -391, 121, -439, 56)

[node name="collpol_outer_right" type="CollisionPolygon2D" parent="world_boundary_wall"]
position = Vector2(4, 0)
polygon = PackedVector2Array(-4, -227, 40, -235, 98, -226, 134, -226, 146, -220, 158, -221, 177, -210, 191, -214, 229, -200, 240, -209, 339, -151, 404, -117, 435, -54, 443, 0, 431, 61, 399, 111, 327, 154, 241, 192, 174, 212, -4, 228, -4, 262, 176, 267, 270, 248, 407, 206, 472, 127, 495, 63, 523, 2, 508, -54, 482, -108, 446, -163, 362, -209, 256, -250, 189, -271, 145, -284, 86, -282, -4, -284)

[node name="wall_player_push" type="Area2D" parent="world_boundary_wall"]
collision_layer = 0
collision_mask = 128

[node name="collpol_outer_left" type="CollisionPolygon2D" parent="world_boundary_wall/wall_player_push"]
polygon = PackedVector2Array(-450, -4, -421, -93, -388, -133, -340, -165, -318, -167, -292, -184, -237, -199, -215, -212, -154, -225, -68, -224, -44, -228, 0, -227, 0, -284, -65, -281, -225, -260, -270, -245, -345, -223, -424, -184, -493, -124, -512, -74, -530, 7, -487, 111, -435, 179, -313, 220, -186, 266, 0, 262, 0, 228, -181, 213, -252, 189, -313, 161, -391, 121, -439, 56)

[node name="collpol_outer_right" type="CollisionPolygon2D" parent="world_boundary_wall/wall_player_push"]
position = Vector2(4, 0)
polygon = PackedVector2Array(-4, -227, 40, -235, 98, -226, 134, -226, 146, -220, 158, -221, 177, -210, 191, -214, 229, -200, 240, -209, 339, -151, 404, -117, 435, -54, 443, 0, 431, 61, 399, 111, 327, 154, 241, 192, 174, 212, -4, 228, -4, 262, 176, 267, 270, 248, 407, 206, 472, 127, 495, 63, 523, 2, 508, -54, 482, -108, 446, -163, 362, -209, 256, -250, 189, -271, 145, -284, 86, -282, -4, -284)

[node name="world_boundary" type="Area2D" parent="."]
collision_layer = 0
collision_mask = 255

[node name="collpol_inner_left" type="CollisionPolygon2D" parent="world_boundary"]
polygon = PackedVector2Array(-446, -5, -418, -92, -386, -131, -339, -163, -317, -165, -291, -182, -235, -197, -212, -210, -155, -222, -68, -222, -43, -226, 2, -224, 0, -25, -19, -25, -36, -16, -41, 1, -35, 17, -20, 25, 0.337952, 24.7535, -1, 225, -180, 210, -250, 186, -310, 158, -388, 119, -436, 55)

[node name="collpol_inner_right" type="CollisionPolygon2D" parent="world_boundary"]
polygon = PackedVector2Array(2, -224, 41, -232, 98, -224, 138, -223, 150, -217, 161, -218, 180, -207, 194, -211, 233, -197, 244, -206, 341, -149, 406, -115, 436, -53, 445, -2, 433, 60, 401, 109, 328, 152, 241, 190, 177, 209, -1, 225, 1, 26, 24, 24, 39, 12, 41, -2, 35, -17, 24, -24, 0, -25)

[node name="spawn_boundary" type="Area2D" parent="."]
collision_layer = 0
collision_mask = 128

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="spawn_boundary"]
polygon = PackedVector2Array(-363, 0, -326, -90, -180, -154, -1, -171, 172, -150, 270, -125, 341, -73, 368, 2, 329, 82, 190, 147, 1, 175, -200, 144, -323, 86)

[node name="orbit_system" parent="." instance=ExtResource("10_06eai")]

[node name="mugre_pool" parent="." instance=ExtResource("12_f7ym0")]

[node name="save_system" parent="." instance=ExtResource("8_6o2rw")]

[node name="galpon" parent="." instance=ExtResource("12_m7g0u")]
position = Vector2(-246, -145)

[node name="jugador" parent="." instance=ExtResource("3_75jji")]
position = Vector2(103, -188)

[node name="Camera2D" type="Camera2D" parent="jugador"]
zoom = Vector2(4, 4)
position_smoothing_enabled = true

[node name="pointer" type="AnimatedSprite2D" parent="."]
z_index = 1
z_as_relative = false
scale = Vector2(0.5, 0.5)
sprite_frames = SubResource("SpriteFrames_cae5a")
animation = &"target_hold"

[connection signal="finished" from="palita_boceto_1" to="." method="_on_palita_boceto_1_finished"]
[connection signal="finished" from="ambient" to="." method="_on_ambient_finished"]
[connection signal="finished" from="wisdoms_tragedy" to="." method="_on_wisdoms_tragedy_finished"]
[connection signal="body_exited" from="world_boundary" to="." method="_on_world_boundary_body_exited"]
[connection signal="area_shape_entered" from="spawn_boundary" to="." method="_on_spawn_boundary_area_shape_entered"]
[connection signal="animation_finished" from="pointer" to="." method="_on_pointer_animation_finished"]
